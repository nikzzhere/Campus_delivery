<%- include('partials/header'); -%>
 
 <h2>Change Password</h2>


    <form id="myForm" action="/change_pwd" method="post">
               <label for="new-password">New Password:</label>
               <input class="pass" type="password" id="new-password" name="new-password" required placeholder="New Password">
               <span class="toggle-password" id="toggle-new-password" onclick="togglePassword('new-password')">üëÅÔ∏è</span>

               <label for="confirm-password">Confirm Password:</label>
               <input class="pass" type="password" id="confirm-password" name="confirm_password" required placeholder="Confirm Password">
               <span class="toggle-password" id="toggle-confirm-password" onclick="togglePassword('confirm-password')">üëÅÔ∏è</span>

               <!-- Display dynamic feedback -->
               <p id="password-feedback" class="password-match-feedback">Passwords match</p>

               <button type="submit">Submit</button>
           </form>

        <script>
            
            // Add JavaScript for dynamic password matching feedback
            document.getElementById('new-password').addEventListener('input', updatePasswordFeedback);
            document.getElementById('confirm-password').addEventListener('input', updatePasswordFeedback);

            // Trigger the function once when the page loads
            window.addEventListener('load', function() {
                updatePasswordFeedback();
            });

            function updatePasswordFeedback() {
                var newPassword = document.getElementById('new-password').value;
                var confirmPassword = document.getElementById('confirm-password').value;
                var feedbackElement = document.getElementById('password-feedback');

                if (newPassword === confirmPassword) {
                    if (newPassword !== "" && confirmPassword !== "") {
                        feedbackElement.innerHTML = 'Passwords match';
                        feedbackElement.className = 'password-match-feedback';
                    } else {
                        feedbackElement.innerHTML = '';
                        feedbackElement.className = '';
                    }
                } else {
                    feedbackElement.innerHTML = 'Passwords do not match';
                    feedbackElement.className = 'password-mismatch-feedback';
                }
            }

            // Function to toggle password visibility
            function togglePassword(inputId) {
                var inputElement = document.getElementById(inputId);
                var type = inputElement.type === 'password' ? 'text' : 'password';
                inputElement.type = type;
            }

            document.getElementById("myForm").addEventListener("submit", function(event) {
            // Prevent the default form submission
            event.preventDefault();

            // Check the specific condition
            if ( document.getElementById('new-password').value === document.getElementById('confirm-password').value) {
            // If the condition is met, submit the form
            this.submit();
            } else {
            // Handle the case where the condition is not met
            alert("Passwords are not matching . Kindly check ..");
            }
        });
        </script>
<!---->
<!--        <a href="forgot_password.php" class="forgot-password">Forgot Password?</a>-->
<!--        <p>New user? <a href="file:///Users/msapple/Desktop/study/CSD/three/registration.html">Register here</a></p>-->

</div>

<%- include("partials/footer") -%>